<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../static/images/icon/DocumentsIcon.png" type="image/png">
    <title>管理页面</title>
    <!-- 引入 Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入 SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css">
</head>

<body>
    <div class="container mt-5">
        <!-- 添加导航按钮 -->
        <div class="mb-4">
            <button type="button" class="btn btn-secondary" onclick="logout()">登出并返回登录页面</button>
            <button type="button" class="btn btn-primary" onclick="goToUploadPage()">前往上传页面</button>
            <button type="button" class="btn btn-info" onclick="goToDownloadPage()">前往下载页面</button>
        </div>
        <h2 class="text-center">管理页面</h2>
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">用户管理</div>
                    <div class="card-body">
                        <div id="usersList"></div>
                        <button class="btn btn-primary mt-3" data-bs-toggle="modal"
                            data-bs-target="#userModal">添加用户</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">角色管理</div>
                    <div class="card-body">
                        <div id="rolesList"></div>
                        <button class="btn btn-primary mt-3" data-bs-toggle="modal"
                            data-bs-target="#roleModal">添加角色</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">权限管理</div>
                    <div class="card-body">
                        <div id="permissionsList"></div>
                        <button class="btn btn-primary mt-3" data-bs-toggle="modal"
                            data-bs-target="#permissionModal">添加权限</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 用户模态框 -->
        <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" inert>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="userModalLabel">添加用户</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="userForm1">
                            <div class="mb-3">
                                <label for="userUsername" class="form-label">用户名</label>
                                <input type="text" class="form-control" id="userUsername" required>
                            </div>
                            <div class="mb-3">
                                <label for="userPassword" class="form-label">密码</label>
                                <input type="password" class="form-control" id="userPassword" required>
                            </div>
                            <div class="mb-3">
                                <label for="userEmail" class="form-label">邮箱</label>
                                <input type="email" class="form-control" id="userEmail" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addUser()">保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 角色模态框 -->
        <div class="modal fade" id="roleModal" tabindex="-1" aria-labelledby="roleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="roleModalLabel">添加角色</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="roleForm2">
                            <div class="mb-3">
                                <label for="roleName" class="form-label">角色名称</label>
                                <input type="text" class="form-control" id="roleName2" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addRole()">保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 权限模态框 -->
        <div class="modal fade" id="permissionModal" tabindex="-1" aria-labelledby="permissionModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="permissionModalLabel">添加权限</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="permissionForm2">
                            <div class="mb-3">
                                <label for="permissionName" class="form-label">权限名称</label>
                                <input type="text" class="form-control" id="permissionName2" required>
                            </div>
                            <div class="mb-3">
                                <label for="permissionCode" class="form-label">权限代码</label>
                                <input type="text" class="form-control" id="permissionCode2" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addPermission()">保存</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 添加管理者模态框 -->
        <div class="modal fade" id="addAdminModal" tabindex="-1" aria-labelledby="addAdminModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addAdminModalLabel">添加管理者</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="addAdminForm">
                            <div class="mb-3">
                                <label for="adminUsername" class="form-label">用户名</label>
                                <input type="text" class="form-control" id="adminUsername" required>
                            </div>
                            <div class="mb-3">
                                <label for="adminPassword" class="form-label">密码</label>
                                <input type="password" class="form-control" id="adminPassword" required>
                            </div>
                            <div class="mb-3">
                                <label for="adminEmail" class="form-label">邮箱</label>
                                <input type="email" class="form-control" id="adminEmail" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addAdmin()">保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 在用户管理区域添加按钮 -->
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">用户管理</div>
                <div class="card-body">
                    <div id="usersList"></div>
                    <button class="btn btn-primary mt-3" data-bs-toggle="modal"
                        data-bs-target="#userModal">添加用户</button>
                    <button class="btn btn-warning mt-3" data-bs-toggle="modal"
                        data-bs-target="#addAdminModal">添加管理者</button>
                </div>
            </div>
        </div>

        <!-- 角色模态框 -->
        <div class="modal fade" id="roleModal" tabindex="-1" aria-labelledby="roleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="roleModalLabel">添加角色</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="roleForm2">
                            <div class="mb-3">
                                <label for="roleName" class="form-label">角色名称</label>
                                <input type="text" class="form-control" id="roleName2" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addRole()">保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 权限模态框 -->
        <div class="modal fade" id="permissionModal" tabindex="-1" aria-labelledby="permissionModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="permissionModalLabel">添加权限</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="permissionForm2">
                            <div class="mb-3">
                                <label for="permissionName" class="form-label">权限名称</label>
                                <input type="text" class="form-control" id="permissionName2" required>
                            </div>
                            <div class="mb-3">
                                <label for="permissionCode" class="form-label">权限代码</label>
                                <input type="text" class="form-control" id="permissionCode2" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="addPermission()">保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- 引入 Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 引入 SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
    <script src="../static/js/admin.js"></script>
    <script>
        function logout() {
            // 清除本地存储的 token
            localStorage.removeItem('token');
            // 重定向到登录页面
            window.location.href = 'login.html';
        }

        function goToUploadPage() {
            // 重定向到上传页面
            window.location.href = 'upload.html';
        }

        function goToDownloadPage() {
            // 重定向到下载页面
            window.location.href = 'download.html';
        }
    </script>
</body>

</html>