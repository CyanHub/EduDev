# Go池化技术


## 一、实验目的

1. 理解协程池的核心概念：掌握协程池的设计思想，理解其在并发编程中的作用。
2. 熟悉协程池的基本使用：掌握协程池的创建、任务提交、以及关闭等基本操作。
3. 掌握Goroutine的复用机制：理解协程池如何通过复用Goroutine来减少资源开销。
4. 培养良好的并发编程习惯：通过实验，养成合理控制并发数量、避免 Goroutine 泄漏的良好习惯。

## 二、实验仪器设备或材料

1. 计算机：运行Windows、Linux或macOS操作系统的计算机。
2. 网络连接：用于下载依赖。
3. 文本编辑器或IDE：GoLand（推荐）或其他，用于编写Go代码。
4. Go语言环境：已安装并配置好Go语言开发环境。

## 三、实验原理

协程的核心思想是复用
Goroutine。与每次需要执行任务时都创建新的 Goroutine 相比，协程池会预先创建一定数量的
Goroutine，并将它们保存在池中。当有新的任务需要执行时，从池中获取一个 Goroutine 来执行任务，任务执行完毕后，Goroutine 返回池中等待下一个任务。这样可以减少 Goroutine 的创建和销毁开销，提高程序的并发性能。

## 四、实验内容与步骤

1. 定义协程池结构体：协程池结构体通常包含任务管道、任务数量、上下文、取消信号、并发控制组件。
2. 创建协程池：初始化步骤一中定义的协程池结构体。
3. 编写启动工作Goroutine：通过pool.Start方法让协程池开始工作。
4. 编写工作线程：为协程池中的每个协程编写统一的工作方法worker
5. 编写提交任务方法用于往协程池中添加任务。

### **实验注意事项**

1. 协程池大小：合理设置协程池的大小，过大可能导致资源浪费，过小则无法充分利用并发性能。
2. 任务类型：协程池适合处理计算密集型任务，对于 I/O 密集型任务，使用协程池可能无法带来明显的性能提升。
3. 资源释放：确保在程序退出时，正确关闭协程池，释放资源。
